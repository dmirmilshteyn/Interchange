language: csharp
mono:
 - beta

env:
 - DNX_BUILD_VERSION = $TRAVIS_BUILD_NUMBER

install: 
 - curl -sSL https://raw.githubusercontent.com/aspnet/Home/dev/dnvminstall.sh | sh && source ~/.dnx/dnvm/dnvm.sh
 - dnvm upgrade

script:
 - cd tests
 - dnu restore
 - dnx test
 - cd ../src/Interchange
 - dnu restore
 - dnu pack --configuration Release
 - cd bin/Release
 - nuget push *.nupkg $API_KEY -Source $FEED_URL